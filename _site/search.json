[
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial",
    "title": "Take Home Exercise 2",
    "section": "Aspatial",
    "text": "Aspatial\n\nData Vaksinasi Berbasis Kelurahan (01 Juli 2021) | Format: .xlsx | Riwayat File Vaksinasi DKI Jakarta"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#geospatial",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#geospatial",
    "title": "Take Home Exercise 2",
    "section": "Geospatial",
    "text": "Geospatial\n\nBATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA | Format: Shapefile | Indonesia Geospatial portal"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#data-wrangling",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#data-wrangling",
    "title": "Take Home Exercise 2",
    "section": "Data Wrangling",
    "text": "Data Wrangling\n\nCheck for invalid geometries\n\n\nReference from senior sample submissions for code for this section, with credit to Megan’s Take-Home Exercise 1: Analysing and Visualising Spatio-temporal Patterns of COVID-19 in DKI Jakarta, Indonesia\n\nlength(which(st_is_valid(jakarta_data) == FALSE))\n\n[1] 0\n\n\n\n\nNo invalid geometries\n\nCheck for missing values\n\njakarta_data[rowSums(is.na(jakarta_data))!=0,]\n\nSimple feature collection with 2 features and 161 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.8412 ymin: -6.154036 xmax: 106.8612 ymax: -6.144973\nGeodetic CRS:  WGS 84\n    OBJECT_ID KODE_DESA             DESA   KODE    PROVINSI KAB_KOTA KECAMATAN\n243     25645  31888888     DANAU SUNTER 318888 DKI JAKARTA     <NA>      <NA>\n244     25646  31888888 DANAU SUNTER DLL 318888 DKI JAKARTA     <NA>      <NA>\n    DESA_KELUR JUMLAH_PEN JUMLAH_KK LUAS_WILAY KEPADATAN PERPINDAHA JUMLAH_MEN\n243       <NA>          0         0          0         0          0          0\n244       <NA>          0         0          0         0          0          0\n    PERUBAHAN WAJIB_KTP SILAM KRISTEN KHATOLIK HINDU BUDHA KONGHUCU KEPERCAYAA\n243         0         0     0       0        0     0     0        0          0\n244         0         0     0       0        0     0     0        0          0\n    PRIA WANITA BELUM_KAWI KAWIN CERAI_HIDU CERAI_MATI U0 U5 U10 U15 U20 U25\n243    0      0          0     0          0          0  0  0   0   0   0   0\n244    0      0          0     0          0          0  0  0   0   0   0   0\n    U30 U35 U40 U45 U50 U55 U60 U65 U70 U75 TIDAK_BELU BELUM_TAMA TAMAT_SD SLTP\n243   0   0   0   0   0   0   0   0   0   0          0          0        0    0\n244   0   0   0   0   0   0   0   0   0   0          0          0        0    0\n    SLTA DIPLOMA_I DIPLOMA_II DIPLOMA_IV STRATA_II STRATA_III BELUM_TIDA\n243    0         0          0          0         0          0          0\n244    0         0          0          0         0          0          0\n    APARATUR_P TENAGA_PEN WIRASWASTA PERTANIAN NELAYAN AGAMA_DAN PELAJAR_MA\n243          0          0          0         0       0         0          0\n244          0          0          0         0       0         0          0\n    TENAGA_KES PENSIUNAN LAINNYA GENERATED KODE_DES_1 BELUM_ MENGUR_ PELAJAR_\n243          0         0       0      <NA>       <NA>      0       0        0\n244          0         0       0      <NA>       <NA>      0       0        0\n    PENSIUNA_1 PEGAWAI_ TENTARA KEPOLISIAN PERDAG_ PETANI PETERN_ NELAYAN_1\n243          0        0       0          0       0      0       0         0\n244          0        0       0          0       0      0       0         0\n    INDUSTR_ KONSTR_ TRANSP_ KARYAW_ KARYAW1 KARYAW1_1 KARYAW1_12 BURUH BURUH_\n243        0       0       0       0       0         0          0     0      0\n244        0       0       0       0       0         0          0     0      0\n    BURUH1 BURUH1_1 PEMBANT_ TUKANG TUKANG_1 TUKANG_12 TUKANG__13 TUKANG__14\n243      0        0        0      0        0         0          0          0\n244      0        0        0      0        0         0          0          0\n    TUKANG__15 TUKANG__16 TUKANG__17 PENATA PENATA_ PENATA1_1 MEKANIK SENIMAN_\n243          0          0          0      0       0         0       0        0\n244          0          0          0      0       0         0       0        0\n    TABIB PARAJI_ PERANCA_ PENTER_ IMAM_M PENDETA PASTOR WARTAWAN USTADZ JURU_M\n243     0       0        0       0      0       0      0        0      0      0\n244     0       0        0       0      0       0      0        0      0      0\n    PROMOT ANGGOTA_ ANGGOTA1 ANGGOTA1_1 PRESIDEN WAKIL_PRES ANGGOTA1_2\n243      0        0        0          0        0          0          0\n244      0        0        0          0        0          0          0\n    ANGGOTA1_3 DUTA_B GUBERNUR WAKIL_GUBE BUPATI WAKIL_BUPA WALIKOTA WAKIL_WALI\n243          0      0        0          0      0          0        0          0\n244          0      0        0          0      0          0        0          0\n    ANGGOTA1_4 ANGGOTA1_5 DOSEN GURU PILOT PENGACARA_ NOTARIS ARSITEK AKUNTA_\n243          0          0     0    0     0          0       0       0       0\n244          0          0     0    0     0          0       0       0       0\n    KONSUL_ DOKTER BIDAN PERAWAT APOTEK_ PSIKIATER PENYIA_ PENYIA1 PELAUT\n243       0      0     0       0       0         0       0       0      0\n244       0      0     0       0       0         0       0       0      0\n    PENELITI SOPIR PIALAN PARANORMAL PEDAGA_ PERANG_ KEPALA_ BIARAW_ WIRASWAST_\n243        0     0      0          0       0       0       0       0          0\n244        0     0      0          0       0       0       0       0          0\n    LAINNYA_12 LUAS_DESA KODE_DES_3 DESA_KEL_1 KODE_12\n243          0         0       <NA>       <NA>       0\n244          0         0       <NA>       <NA>       0\n                          geometry\n243 MULTIPOLYGON (((106.8612 -6...\n244 MULTIPOLYGON (((106.8504 -6...\n\n\n\n\nRemove missing fields\n\njakarta_data <- na.omit(jakarta_data,c(\"DESA_KELUR\"))\n\n\n\n\nCheck coordinate system of data\n\nst_crs(jakarta_data)\n\nCoordinate Reference System:\n  User input: WGS 84 \n  wkt:\nGEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"latitude\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"longitude\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4326]]\n\n\n\nNote: WGS84 is not appropriate, have to change to national coordinate system of Indonesia – DGN95\n\njakarta_data <- st_transform(jakarta_data, 23845)\n\n\nCheck if CRS changed\n\nst_crs(jakarta_data)\n\nCoordinate Reference System:\n  User input: EPSG:23845 \n  wkt:\nPROJCRS[\"DGN95 / Indonesia TM-3 zone 54.1\",\n    BASEGEOGCRS[\"DGN95\",\n        DATUM[\"Datum Geodesi Nasional 1995\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4755]],\n    CONVERSION[\"Indonesia TM-3 zone 54.1\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",139.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9999,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",200000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",1500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"easting (X)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"northing (Y)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre.\"],\n        AREA[\"Indonesia - onshore east of 138°E.\"],\n        BBOX[-9.19,138,-1.49,141.01]],\n    ID[\"EPSG\",23845]]\n\n\n\n\n\nRemoving redundant data\n\nWe are only interested in DKI Jakarta, hence we will be removing other islands or districts from the data.\n\n\nSince KAB-KOTA which is ‘City’ will be the best way to filter them, we take a look at the cities in this dataset.\n\nunique(jakarta_data$\"KAB_KOTA\")\n\n[1] \"JAKARTA BARAT\"    \"JAKARTA PUSAT\"    \"KEPULAUAN SERIBU\" \"JAKARTA UTARA\"   \n[5] \"JAKARTA TIMUR\"    \"JAKARTA SELATAN\" \n\n\n\n\n\n\nTranslation of column names for ease of handling data\n\nUsing rename() of dplyr package\n\njakarta_data <- jakarta_data %>% \n  dplyr::rename(\n    Object_ID=OBJECT_ID,\n    Province=PROVINSI, \n    City=KAB_KOTA, \n    District=KECAMATAN, \n    Village_Code=KODE_DESA, \n    Village=DESA, \n    Sub_District=DESA_KELUR,\n    Code=KODE, \n    Total_Population=JUMLAH_PEN\n    )\n\n\n\nVisualising to see all cities in this dataset\n\ntm_shape(jakarta_data) + \n  tm_polygons(\"Sub_District\")\n\nWarning: Number of levels of the variable \"Sub_District\" is 267, which is\nlarger than max.categories (which is 30), so levels are combined. Set\ntmap_options(max.categories = 267) in the layer function to show all levels.\n\n\nLegend labels were too wide. The labels have been resized to 0.35, 0.31, 0.30, 0.36, 0.38, 0.60, 0.34, 0.32, 0.44, 0.41, 0.27, 0.31, 0.30, 0.26, 0.25, 0.34, 0.30, 0.24, 0.35, 0.35, 0.33, 0.28, 0.25, 0.26, 0.27, 0.42, 0.42, 0.28, 0.25, 0.28. Increase legend.width (argument of tm_layout) to make the legend wider and therefore the labels larger.\n\n\n\n\n\n\n\nRemoving redundant data\n\njakarta_data <- filter(jakarta_data, City != \"KEPULAUAN SERIBU\")\n\n\nNote: reduced from 267 observations to 261 observations\n\n\n\nRetaining first 9 fields of jakarta_data as per assignment instructions\n\njakarta_data <- jakarta_data %>% select(1:9)\n\n\nNote: reduced to 10 variables\n\n\n\n\nFinal visualisation of DKI Jakarta data\n\ntm_shape(jakarta_data) + \n  tm_polygons(\"Sub_District\")\n\nWarning: Number of levels of the variable \"Sub_District\" is 261, which is\nlarger than max.categories (which is 30), so levels are combined. Set\ntmap_options(max.categories = 261) in the layer function to show all levels.\n\n\nSome legend labels were too wide. These labels have been resized to 0.63, 0.42, 0.44, 0.49, 0.41, 0.50, 0.60, 0.59, 0.62, 0.61, 0.57, 0.57, 0.53, 0.59. Increase legend.width (argument of tm_layout) to make the legend wider and therefore the labels larger."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial-data",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial-data",
    "title": "Take Home Exercise 2",
    "section": "Aspatial Data",
    "text": "Aspatial Data"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial-data-pre-processing-function",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial-data-pre-processing-function",
    "title": "Take Home Exercise 2",
    "section": "Aspatial Data Pre-processing Function",
    "text": "Aspatial Data Pre-processing Function\n\n# takes in an aspatial data filepath and returns a processed output\naspatial_preprocess <- function(filepath){\n  # read xlsx file\n  result_file <- read_xlsx(filepath)\n  \n  # Create the Date Column\n  # the format of our files is: Vaccination DD MM YYYY Jarkarta\n  # Starting Point: Vaccination\n  # End Point: Jarkarta\n  # Use [1] to indicate first element in the list\n  # reference https://stackoverflow.com/questions/14249562/find-the-location-of-a-character-in-string\n  startpoint <- gregexpr(pattern=\"Vaccination\", filepath)[[1]] + 12\n  endpoint <- gregexpr(pattern=\"Jarkarta\", filepath)[[1]] - 2\n  result_file$Date <- substr(filepath, startpoint, endpoint)\n  \n  # Retain the Relevant Columns\n  result_file <- result_file %>% \n    select(\"Date\", \n           \"WILAYAH KOTA\", \n           \"KECAMATAN\", \n           \"KELURAHAN\", \n           \"SASARAN\", \n           \"BELUM VAKSIN\")\n  return(result_file)\n}"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#feed-files-into-preprocessing-function",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#feed-files-into-preprocessing-function",
    "title": "Take Home Exercise 2",
    "section": "Feed files into preprocessing function",
    "text": "Feed files into preprocessing function\n\n# in the folder 'data/aspatial', find files with the extension '.xlsx' and add it to our fileslist \n# the full.names=TRUE prepends the directory path to the file names, giving a relative file path - otherwise, only the file names (not the paths) would be returned \n# reference: https://stat.ethz.ch/R-manual/R-devel/library/base/html/list.files.html\nfileslist <-list.files(path = \"data/aspatial\", pattern = \"*.xlsx\", full.names=TRUE)\n\n# afterwards, for every element in fileslist, apply aspatial_process function\ndflist <- lapply(seq_along(fileslist), function(x) aspatial_preprocess(fileslist[x]))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#convert-dflist-into-actual-dataframe",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#convert-dflist-into-actual-dataframe",
    "title": "Take Home Exercise 2",
    "section": "Convert dflist into actual dataframe",
    "text": "Convert dflist into actual dataframe\n\ncases_jakarta <- ldply(dflist, data.frame)\n\n\nCheck cases_jakarta\n\nglimpse(cases_jakarta)\n\nRows: 3,216\nColumns: 6\n$ Date         <chr> \"01 Agustus 2021 \", \"01 Agustus 2021 \", \"01 Agustus 2021 …\n$ WILAYAH.KOTA <chr> NA, \"JAKARTA UTARA\", \"JAKARTA BARAT\", \"JAKARTA TIMUR\", \"J…\n$ KECAMATAN    <chr> NA, \"PADEMANGAN\", \"TAMBORA\", \"KRAMAT JATI\", \"JATINEGARA\",…\n$ KELURAHAN    <chr> \"TOTAL\", \"ANCOL\", \"ANGKE\", \"BALE KAMBANG\", \"BALI MESTER\",…\n$ SASARAN      <dbl> 8941211, 23947, 29381, 29074, 9752, 26285, 21566, 23886, …\n$ BELUM.VAKSIN <dbl> 4399496, 12155, 13727, 18226, 4987, 13716, 10232, 9999, 2…"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#format-date-column",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#format-date-column",
    "title": "Take Home Exercise 2",
    "section": "Format Date Column",
    "text": "Format Date Column\n\n# parses the 'Date' column into Month(Full Name)-YYYY datetime objects\n# reference: https://stackoverflow.com/questions/53380650/b-y-date-conversion-gives-na\n\n# locale=\"ind\" means that the locale has been set as Indonesia\nSys.setlocale(locale=\"ind\")\n\nWarning in Sys.setlocale(locale = \"ind\"): using locale code page other than\n65001 (\"UTF-8\") may cause problems\n\n\n[1] \"LC_COLLATE=Indonesian_Indonesia.1252;LC_CTYPE=Indonesian_Indonesia.1252;LC_MONETARY=Indonesian_Indonesia.1252;LC_NUMERIC=C;LC_TIME=Indonesian_Indonesia.1252\"\n\n\n\ncases_jakarta$Date <- c(cases_jakarta$Date) %>% \n  as.Date(cases_jakarta$Date, format =\"%d %B %Y\")\nglimpse(cases_jakarta)\n\nRows: 3,216\nColumns: 6\n$ Date         <date> 2021-08-01, 2021-08-01, 2021-08-01, 2021-08-01, 2021-08-~\n$ WILAYAH.KOTA <chr> NA, \"JAKARTA UTARA\", \"JAKARTA BARAT\", \"JAKARTA TIMUR\", \"J~\n$ KECAMATAN    <chr> NA, \"PADEMANGAN\", \"TAMBORA\", \"KRAMAT JATI\", \"JATINEGARA\",~\n$ KELURAHAN    <chr> \"TOTAL\", \"ANCOL\", \"ANGKE\", \"BALE KAMBANG\", \"BALI MESTER\",~\n$ SASARAN      <dbl> 8941211, 23947, 29381, 29074, 9752, 26285, 21566, 23886, ~\n$ BELUM.VAKSIN <dbl> 4399496, 12155, 13727, 18226, 4987, 13716, 10232, 9999, 2~"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#renaming-columns",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#renaming-columns",
    "title": "Take Home Exercise 2",
    "section": "Renaming columns",
    "text": "Renaming columns\n\ncases_jakarta <- cases_jakarta %>%\n  dplyr::rename(\n    Date=Date,\n    City = WILAYAH.KOTA,\n    District = KECAMATAN,\n    Sub_District = KELURAHAN,\n    Target_vaccine = SASARAN,\n    Unvaccinated = BELUM.VAKSIN\n  )"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#removing-redundant-cities",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#removing-redundant-cities",
    "title": "Take Home Exercise 2",
    "section": "Removing redundant cities",
    "text": "Removing redundant cities\n\ncases_jakarta <- filter(cases_jakarta, City != \"KAB.ADM.KEP.SERIBU\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#data-integration-of-geospatial-and-aspatial",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#data-integration-of-geospatial-and-aspatial",
    "title": "Take Home Exercise 2",
    "section": "Data Integration of Geospatial and Aspatial",
    "text": "Data Integration of Geospatial and Aspatial\n\n# checks for column names of the dataframes\ncolnames(jakarta_data)\n\n [1] \"Object_ID\"        \"Village_Code\"     \"Village\"          \"Code\"            \n [5] \"Province\"         \"City\"             \"District\"         \"Sub_District\"    \n [9] \"Total_Population\" \"geometry\"        \n\n\n\ncolnames(cases_jakarta)\n\n[1] \"Date\"           \"City\"           \"District\"       \"Sub_District\"  \n[5] \"Target_vaccine\" \"Unvaccinated\"  \n\n\n\n# joins cases_jakarta to bd_jakarta based on Province, Sub_District and City\ncombined_jakarta <- left_join(jakarta_data, cases_jakarta,\n                              by=c(\n                                \"District\"=\"District\", \n                                \"Sub_District\"=\"Sub_District\",\n                                \"City\"=\"City\")\n                              )\n\n\nNow let’s visualise subdistrict in terms of unvaccinated and target vaccine\n\ntarget_vaccine <- tm_shape(combined_jakarta) +\n  tm_borders(alpha = 0.5) +\n  tm_fill(\"Target_vaccine\")\n\nnot_vaccinated <- tm_shape(combined_jakarta) +\n  tm_borders(alpha = 0.5) +\n  tm_fill(\"Unvaccinated\")\n\ntmap_arrange(target_vaccine, not_vaccinated)\n\n\n\n\n\n\nAs shown above, there are grey areas in the map. These are missing values which might be caused by mismatched records from joining subdistricts/city from the 2 dataframes."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#correcting-mismatched-records",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#correcting-mismatched-records",
    "title": "Take Home Exercise 2",
    "section": "Correcting mismatched records",
    "text": "Correcting mismatched records\n\nTo find, we see what was in jakarta_data but not in cases_jakarta\n\nvaccine_subdistrict <- c(cases_jakarta$Sub_District)\njakarta_subdistrict <- c(jakarta_data$Sub_District)\n\nunique(vaccine_subdistrict[!(vaccine_subdistrict %in% jakarta_subdistrict)])\n\n[1] \"BALE KAMBANG\"          \"HALIM PERDANA KUSUMAH\" \"JATI PULO\"            \n[4] \"KAMPUNG TENGAH\"        \"KERENDANG\"             \"KRAMAT JATI\"          \n[7] \"PAL MERIAM\"            \"PINANG RANTI\"          \"RAWA JATI\"            \n\n\n\nunique(jakarta_subdistrict[!(jakarta_subdistrict %in% vaccine_subdistrict)])\n\n[1] \"KRENDANG\"             \"RAWAJATI\"             \"TENGAH\"              \n[4] \"BALEKAMBANG\"          \"PINANGRANTI\"          \"JATIPULO\"            \n[7] \"PALMERIAM\"            \"KRAMATJATI\"           \"HALIM PERDANA KUSUMA\"\n\n\n\n\nLet us visualise the mismatched records\n\n\n\n\n\n\n\nGeospatial Data (jakarta_subdistrict)\nAspatial Data (vaccine_subdistrict)\n\n\n\n\nBALEKAMBANG\nBALE KAMBANG\n\n\nHALIM PERDANA KUSUMA\nHALIM PERDANA KUSUMAH\n\n\nJATIPULO\nJATI PULO\n\n\nTENGAH\nKAMPUNG TENGAH\n\n\nKRENDANG\nKERENDANG\n\n\nKRAMATJATI\nKRAMAT JATI\n\n\nPALMERIAN\nPAL MERIAN\n\n\nPINANGRANTI\nPINANG RANTI\n\n\nRAWAJATI\nRAWA JATI"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#renaming-mismatched-records",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#renaming-mismatched-records",
    "title": "Take Home Exercise 2",
    "section": "Renaming mismatched records",
    "text": "Renaming mismatched records\n\n# where bd_jakarta is a mismatched value, replace with the correct value\njakarta_data$Sub_District[jakarta_data$Sub_District == 'BALEKAMBANG'] <- 'BALE KAMBANG'\njakarta_data$Sub_District[jakarta_data$Sub_District == 'HALIM PERDANA KUSUMA'] <- 'HALIM PERDANA KUSUMAH'\njakarta_data$Sub_District[jakarta_data$Sub_District == 'JATIPULO'] <- 'JATI PULO'\njakarta_data$Sub_District[jakarta_data$Sub_District == 'TENGAH'] <- 'KAMPUNG TENGAH'\njakarta_data$Sub_District[jakarta_data$Sub_District == 'KRAMATJATI'] <- 'KRAMAT JATI'\njakarta_data$Sub_District[jakarta_data$Sub_District == 'KRENDANG'] <- 'KERENDANG'\njakarta_data$Sub_District[jakarta_data$Sub_District == 'PALMERIAM'] <- 'PAL MERIAM'\njakarta_data$Sub_District[jakarta_data$Sub_District == 'PINANGRANTI'] <- 'PINANG RANTI'\njakarta_data$Sub_District[jakarta_data$Sub_District == 'RAWAJATI'] <- 'RAWA JATI'"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#joining-both-dataframes-by-sub-district",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#joining-both-dataframes-by-sub-district",
    "title": "Take Home Exercise 2",
    "section": "Joining both dataframes by sub-district",
    "text": "Joining both dataframes by sub-district\n\ncombined_jakarta <- left_join(jakarta_data, cases_jakarta,\n                          by=c(\"Sub_District\" = \"Sub_District\"))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#visualising-data-once-again",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#visualising-data-once-again",
    "title": "Take Home Exercise 2",
    "section": "Visualising data once again",
    "text": "Visualising data once again\n\ntarget_vaccine <- tm_shape(combined_jakarta) +\n  tm_borders(alpha = 0.5) +\n  tm_fill(\"Target_vaccine\")\n\nnot_vaccinated <- tm_shape(combined_jakarta) +\n  tm_borders(alpha = 0.5) +\n  tm_fill(\"Unvaccinated\")\n\ntmap_arrange(target_vaccine, not_vaccinated)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#calculations",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#calculations",
    "title": "Take Home Exercise 2",
    "section": "Calculations",
    "text": "Calculations\n\nComputation of Monthly Vaccination Rate\n\nvaccine_rate <- cases_jakarta %>%\n  inner_join(jakarta_data, by=c(\"Sub_District\" = \"Sub_District\")) %>%\n  group_by(Sub_District, Date) %>%\n  summarise(`vaccination_rate` = (Target_vaccine - Unvaccinated)/Target_vaccine)\n\n`summarise()` has grouped output by 'Sub_District'. You can override using the\n`.groups` argument.\n\n\n\nglimpse(vaccine_rate)\n\nRows: 3,132\nColumns: 3\nGroups: Sub_District [261]\n$ Sub_District     <chr> \"ANCOL\", \"ANCOL\", \"ANCOL\", \"ANCOL\", \"ANCOL\", \"ANCOL\",~\n$ Date             <date> 2021-07-01, 2021-08-01, 2021-09-01, 2021-10-01, 2021~\n$ vaccination_rate <dbl> 0.3491884, 0.4924208, 0.6184073, 0.7224287, 0.7509083~\n\n\n\nvaccine_rate_pivot <- vaccine_rate %>% ungroup() %>% pivot_wider(names_from = Date, values_from = vaccination_rate)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#mapping-monthly-vaccination-rate",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#mapping-monthly-vaccination-rate",
    "title": "Take Home Exercise 2",
    "section": "Mapping Monthly Vaccination Rate",
    "text": "Mapping Monthly Vaccination Rate\n\nConvert to sf dataframe first\n\ncombined_jakarta <- st_as_sf(combined_jakarta)\n\n\nvaccine_rate_pivot <- vaccine_rate_pivot %>% \n  left_join(jakarta_data, by=c(\"Sub_District\" = \"Sub_District\"))\nvaccine_rate_pivot <- st_as_sf(vaccine_rate_pivot)\n\n\n\nCreate map helper function for recursive map plotting\n\nmap_function <- function(df, varname) {\ntm_shape(df) +\n  tm_fill(varname,\n          style = \"quantile\",\n          palette = \"Blues\",\n          title = \"Vaccination Rate\") +\n  tm_layout(main.title = varname,\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45, \n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type = \"8star\", size = 2) +\n  tm_scale_bar() +\n  tm_grid(alpha = 0.2)\n}\n\n\n\nExecuting the function\n\ntmap_mode(\"plot\")\n\ntmap mode set to plotting\n\ntmap_arrange(map_function(vaccine_rate_pivot, \"2021-07-01\"),\n             map_function(vaccine_rate_pivot, \"2021-08-01\"),\n             map_function(vaccine_rate_pivot, \"2021-09-01\"),\n             map_function(vaccine_rate_pivot, \"2021-10-01\"))\n\n\n\n\n\ntmap_arrange(map_function(vaccine_rate_pivot, \"2021-11-01\"),\n             map_function(vaccine_rate_pivot, \"2021-12-01\"),\n             map_function(vaccine_rate_pivot, \"2022-01-01\"),\n             map_function(vaccine_rate_pivot, \"2022-02-01\"))\n\n\n\n\n\ntmap_arrange(map_function(vaccine_rate_pivot, \"2022-03-01\"),\n             map_function(vaccine_rate_pivot, \"2022-04-01\"),\n             map_function(vaccine_rate_pivot, \"2022-05-01\"),\n             map_function(vaccine_rate_pivot, \"2022-06-01\"))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#spatial-pattern-analysis",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#spatial-pattern-analysis",
    "title": "Take Home Exercise 2",
    "section": "Spatial Pattern Analysis",
    "text": "Spatial Pattern Analysis\n\nAs the palette darkens to a darker shade of blue, it shows a higher vaccination rate. With a varying shade of blue across the entire Jakarta region, it is observed that the vaccines administered were inconsistent – some sub-districts with higher vaccination rates in the first few months of the study period did not maintain as high during later parts of the study period. This could be due to the fact that their citizens in that area have been vaccinated and hence, vaccination efforts are stronger in other sub-districts subsequently."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#derive-contiguity-weights-using-queens-method-sfdep-package",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#derive-contiguity-weights-using-queens-method-sfdep-package",
    "title": "Take Home Exercise 2",
    "section": "Derive contiguity weights using Queen’s method (sfdep() package)",
    "text": "Derive contiguity weights using Queen’s method (sfdep() package)\n\nset.seed(1234)\n\n\nwm_idw <- vaccine_rate_pivot %>%\n  mutate(nb = st_contiguity(geometry),\n         wts = st_inverse_distance(nb, geometry, scale = 1, alpha = 1),\n         .before = 1)\n\n! Polygon provided. Using point on surface."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#compute-gi-values-of-vaccination-rates-for-each-month",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#compute-gi-values-of-vaccination-rates-for-each-month",
    "title": "Take Home Exercise 2",
    "section": "Compute Gi* values of vaccination rates for each month",
    "text": "Compute Gi* values of vaccination rates for each month\n\nHCSA_july2021 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2021-07-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_aug2021 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2021-08-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_sept2021 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2021-09-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_oct2021 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2021-10-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_nov2021 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2021-11-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_dec2021 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2021-12-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_jan2022 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2022-01-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_feb2022 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2022-02-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_mar2022 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2022-03-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_april2022 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2022-04-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_may2022 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2022-05-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\nHCSA_june2022 <- wm_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    `2022-06-01`, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#create-map-objects-of-gi-map-then-plot-the-map.",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#create-map-objects-of-gi-map-then-plot-the-map.",
    "title": "Take Home Exercise 2",
    "section": "Create map objects of Gi* map, then plot the map.",
    "text": "Create map objects of Gi* map, then plot the map.\n\nFor each map, only hot and cold spot areas are displyed. (p-value less than 0.05)\n\n#July 2021\nHCSA_july2021_sig <- HCSA_july2021  %>%\n  filter(p_sim < 0.05)\n\nHCSA_july2021_map <- tm_shape(HCSA_july2021) +\n                      tm_polygons() +\n                      tm_borders(alpha = 0.5) +\n                    tm_shape(HCSA_july2021_sig) +\n                      tm_fill(\"gi_star\") + \n                      tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"July 2021\")\n\n#Aug 2021\nHCSA_aug2021_sig <- HCSA_aug2021  %>%\n  filter(p_sim < 0.05)\n\nHCSA_aug2021_map <-tm_shape(HCSA_aug2021) +\n                      tm_polygons() +\n                      tm_borders(alpha = 0.5) +\n                    tm_shape(HCSA_aug2021_sig) +\n                      tm_fill(\"gi_star\") + \n                      tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Aug 2021\")\n\n#Sept 2021\nHCSA_sept2021_sig <- HCSA_sept2021  %>%\n  filter(p_sim < 0.05)\n\nHCSA_sept2021_map <- tm_shape(HCSA_sept2021) +\n                      tm_polygons() +\n                      tm_borders(alpha = 0.5) +\n                    tm_shape(HCSA_sept2021_sig) +\n                      tm_fill(\"gi_star\") + \n                      tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Sept 2021\")\n\n#Oct 2021\nHCSA_oct2021_sig <- HCSA_oct2021  %>%\n  filter(p_sim < 0.05)\n\nHCSA_oct2021_map <-tm_shape(HCSA_oct2021) +\n                    tm_polygons() +\n                    tm_borders(alpha = 0.5) +\n                  tm_shape(HCSA_oct2021_sig) +\n                    tm_fill(\"gi_star\") + \n                    tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Oct 2021\")\n\n# Nov 2021\nHCSA_nov2021_sig <- HCSA_nov2021  %>%\n  filter(p_sim < 0.05)\n\nHCSA_nov2021_map <-tm_shape(HCSA_nov2021) +\n                    tm_polygons() +\n                    tm_borders(alpha = 0.5) +\n                  tm_shape(HCSA_nov2021_sig) +\n                    tm_fill(\"gi_star\") + \n                    tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Nov 2021\")\n# Dec 2021\nHCSA_dec2021_sig <- HCSA_dec2021  %>%\n  filter(p_sim < 0.05)\n\nHCSA_dec2021_map <-tm_shape(HCSA_dec2021) +\n                  tm_polygons() +\n                  tm_borders(alpha = 0.5) +\n                tm_shape(HCSA_dec2021_sig) +\n                  tm_fill(\"gi_star\") + \n                  tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Dec 2021\")\n\n# Jan 2022\nHCSA_jan2022_sig <- HCSA_jan2022  %>%\n  filter(p_sim < 0.05)\n\nHCSA_jan2022_map <- tm_shape(HCSA_jan2022) +\n                    tm_polygons() +\n                    tm_borders(alpha = 0.5) +\n                  tm_shape(HCSA_jan2022_sig) +\n                    tm_fill(\"gi_star\") + \n                    tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Jan 2022\")\n\n# Fen 2022\nHCSA_feb2022_sig <- HCSA_feb2022  %>%\n  filter(p_sim < 0.05)\n\nHCSA_feb_2022_map <- tm_shape(HCSA_feb2022) +\n                      tm_polygons() +\n                      tm_borders(alpha = 0.5) +\n                    tm_shape(HCSA_feb2022_sig) +\n                      tm_fill(\"gi_star\") + \n                      tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Feb 2022\")\n\n# Mar 2022\nHCSA_mar2022_sig <- HCSA_mar2022  %>%\n  filter(p_sim < 0.05)\n\nHCSA_mar2022_map <- tm_shape(HCSA_mar2022) +\n                      tm_polygons() +\n                      tm_borders(alpha = 0.5) +\n                    tm_shape(HCSA_mar2022_sig) +\n                      tm_fill(\"gi_star\") + \n                      tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Mar 2022\")\n\n#April 2022\nHCSA_april2022_sig <- HCSA_april2022  %>%\n  filter(p_sim < 0.05)\n\nHCSA_april2022_map <- tm_shape(HCSA_april2022) +\n                        tm_polygons() +\n                        tm_borders(alpha = 0.5) +\n                      tm_shape(HCSA_april2022_sig) +\n                        tm_fill(\"gi_star\") + \n                        tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"April 2022\")\n\n# May 2022\nHCSA_may2022_sig <- HCSA_may2022  %>%\n  filter(p_sim < 0.05)\n\nHCSA_may2022_map <- tm_shape(HCSA_may2022) +\n                      tm_polygons() +\n                      tm_borders(alpha = 0.5) +\n                    tm_shape(HCSA_may2022_sig) +\n                      tm_fill(\"gi_star\") + \n                      tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"May 2022\")\n\n# June 2022\nHCSA_june2022_sig <- HCSA_june2022  %>%\n  filter(p_sim < 0.05)\n\nHCSA_june2022_map <- tm_shape(HCSA_june2022) +\n                      tm_polygons() +\n                      tm_borders(alpha = 0.5) +\n                    tm_shape(HCSA_june2022_sig) +\n                      tm_fill(\"gi_star\") + \n                      tm_borders(alpha = 0.4) + \n                      tm_layout(main.title = \"Jun 2022\")\n\n\ntmap_arrange(HCSA_july2021_map, HCSA_aug2021_map, HCSA_sept2021_map, HCSA_oct2021_map)\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n\ntmap_arrange(HCSA_mar2022_map, HCSA_april2022_map, HCSA_may2022_map, HCSA_june2022_map)\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"gi_star\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#emerging-hotspot-analysis-ehsa",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#emerging-hotspot-analysis-ehsa",
    "title": "Take Home Exercise 2",
    "section": "Emerging Hotspot Analysis (EHSA)",
    "text": "Emerging Hotspot Analysis (EHSA)\n\nWe will be conducting an EHSA on the monthly vaccination rates to see how hot and coldspots evolve over time.\n\n\nBuild a time series cube\n\nspacetime() of sfdep will be used to create a spatio-temporal cube\n\nvaccine_rate_st <- spacetime(vaccine_rate, jakarta_data,\n                             .loc_col = \"Sub_District\",\n                             .time_col = \"Date\")\n\nvaccine_rate_st\n\nspacetime ────\n\n\nContext:`data`\n\n\n261 locations `Sub_District`\n\n\n12 time periods `Date`\n\n\n-- data context ----------------------------------------------------------------\n\n\n# A tibble: 3,132 x 3\n# Groups:   Sub_District [261]\n   Sub_District Date       vaccination_rate\n * <chr>        <date>                <dbl>\n 1 ANCOL        2021-07-01            0.349\n 2 ANCOL        2021-08-01            0.492\n 3 ANCOL        2021-09-01            0.618\n 4 ANCOL        2021-10-01            0.722\n 5 ANCOL        2021-11-01            0.751\n 6 ANCOL        2021-12-01            0.770\n 7 ANCOL        2022-01-01            0.789\n 8 ANCOL        2022-02-01            0.806\n 9 ANCOL        2022-03-01            0.808\n10 ANCOL        2022-04-01            0.811\n# ... with 3,122 more rows\n\n\n\nis_spacetime_cube(vaccine_rate_st)\n\n[1] TRUE\n\n\n\n\nThe TRUE return confirms that vaccine_rate_st object is indeed an time-space cube."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#deriving-spatial-weights",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#deriving-spatial-weights",
    "title": "Take Home Exercise 2",
    "section": "Deriving Spatial Weights",
    "text": "Deriving Spatial Weights\n\n# vaccine_nb <- vaccine_rate_st %>%\n#   activate(\"geometry\") %>%\n#   mutate(nb = include_self(st_contiguity(geometry)),\n#          wt = st_inverse_distance(nb, geometry,\n#                                   scale = 1,\n#                                   alpha = 1),\n#          .before = 1)%>%\n#   set_wts(\"wt\") %>%\n#   set_nbs(\"nb\")\n# \n# head(vaccine_nb)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-local-gi",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-local-gi",
    "title": "Take Home Exercise 2",
    "section": "Computing Local Gi*",
    "text": "Computing Local Gi*\n\n# gi_stars <- vaccine_nb %>% \n#   group_by(`Date`) %>% \n#   mutate(gi_star = local_gstar_perm(\n#     vaccine_rate, nb, wt)) %>% \n#   tidyr::unnest(gi_star)\n# \n# gi_stars"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#man-kendall-test",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#man-kendall-test",
    "title": "Take Home Exercise 2",
    "section": "Man Kendall Test",
    "text": "Man Kendall Test\n\njune_rate <- vaccine_rate %>%\n  filter(Date == as.Date(\"2022-06-01\"))%>%\n  arrange(desc(`vaccination_rate`))\n\nhead(june_rate)\n\n# A tibble: 6 x 3\n# Groups:   Sub_District [6]\n  Sub_District          Date       vaccination_rate\n  <chr>                 <date>                <dbl>\n1 HALIM PERDANA KUSUMAH 2022-06-01            0.898\n2 SRENGSENG SAWAH       2022-06-01            0.878\n3 MANGGARAI SELATAN     2022-06-01            0.875\n4 MALAKA SARI           2022-06-01            0.871\n5 GLODOK                2022-06-01            0.870\n6 TEBET BARAT           2022-06-01            0.870\n\n\n\nThe 3 sub-districts with the highest vaccination rates are: HALIM PERDANA KUSUMAH, SRENGSENG SAWAH and MANGGARAI SELATAN."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#observing-these-3-sub-districts-for-man-kendall-test",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#observing-these-3-sub-districts-for-man-kendall-test",
    "title": "Take Home Exercise 2",
    "section": "Observing these 3 sub-districts for Man Kendall Test",
    "text": "Observing these 3 sub-districts for Man Kendall Test\n\n#HALIM PERDANA KUSUMAH\n\n# cbg_hpk <- gi_stars %>% \n#   ungroup() %>% \n#   filter(Sub_District == \"HALIM PERDANA KUSUMAH\") |> \n#   select(Sub_District, Date, gi_star)\n# \n# ggplot(data = cbg_hpk, \n#        aes(x = Date, \n#            y = gi_star)) +\n#   geom_line() +\n#   theme_light()\n\n\n#SRENGSENG SAWAH\n\n# cbg_ss <- gi_stars %>% \n#   ungroup() %>% \n#   filter(Sub_District == \"SRENGSENG SAWAH\") |> \n#   select(Sub_District, Date, gi_star)\n# \n# ggplot(data = cbg_ss, \n#        aes(x = Date, \n#            y = gi_star)) +\n#   geom_line() +\n#   theme_light()\n\n\n#MANGGARAI SELATAN\n\n# cbg_ms <- gi_stars %>% \n#   ungroup() %>% \n#   filter(Sub_District == \"MANGGARAI SELATAN\") |> \n#   select(Sub_District, Date, gi_star)\n# \n# ggplot(data = cbg_ms, \n#        aes(x = Date, \n#            y = gi_star)) +\n#   geom_line() +\n#   theme_light()"
  }
]